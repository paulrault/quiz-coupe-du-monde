<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Quiz Coupe du Monde - XP & Combo</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4f4f4;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
    }
    .container {
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      width: 90%;
      max-width: 600px;
      transition: opacity 0.5s ease-in-out;
    }
    h1, h2 {
      text-align: center;
      color: #2e86de;
    }
    p { font-size: 1em; margin: 10px 0; line-height: 1.6; }
    button {
      background-color: #2e86de;
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      font-size: 1em;
      cursor: pointer;
      margin-top: 20px;
      display: block;
      width: 100%;
    }
    button:hover { background-color: #1e5f9c; }
    .hidden { display: none; }
    .question { font-size: 1.2em; margin-bottom: 20px; }
    .choices { list-style: none; padding: 0; }
    .choices li { margin-bottom: 10px; }
    #timer { font-size: 1.1em; text-align: right; color: #e74c3c; }
    #progress-container {
      width: 100%; height: 10px; background: #ddd; border-radius: 5px;
      margin: 10px 0; overflow: hidden;
    }
    #progress-bar {
      height: 100%; width: 0%; background: #2ecc71; transition: width 0.4s ease;
    }
    #question-counter {
      font-size: 1em; text-align: left; margin-bottom: 10px; color: #666;
    }
    #xpBar {
      width: 100%; background: #ccc; height: 10px; border-radius: 5px; margin-top: 10px;
    }
    #xpFill {
      height: 100%; width: 0%; background: gold; transition: width 0.4s;
    }
    #leaderboard ul { list-style: none; padding: 0; }
  </style>
</head>
<body>
  <div class="container" id="pseudoScreen">
    <h1>Bienvenue !</h1>
    <p>Entre ton pseudo pour commencer le quiz :</p>
    <input type="text" id="pseudoInput" placeholder="Ton pseudo" style="width:100%; padding:10px;">
    <button onclick="startQuiz()">Commencer</button>
  </div>

  <div class="container hidden" id="quizBox">
    <div id="timer">Temps restant : <span id="time">15</span>s</div>
    <div id="progress-container"><div id="progress-bar"></div></div>
    <div id="question-counter"></div>
    <div class="question" id="question"></div>
    <ul class="choices" id="choices"></ul>
    <div id="xpBar"><div id="xpFill"></div></div>
    <p>XP : <span id="xpDisplay">0</span></p>
    <button id="nextBtn">Suivant</button>
  </div>

  <div class="container hidden" id="result">
    <h2 id="scoreText">Score final : </h2>
    <p id="levelMsg"></p>
    <div id="leaderboard"></div>
    <button onclick="location.reload()">Rejouer</button>
  </div>

  <script>
    const questions = [
      { question: "Quel pays a remport√© la Coupe du Monde 2018 ?", choices: ["Allemagne", "France", "Br√©sil", "Argentine"], answer: "France" },
      { question: "Combien de joueurs sur le terrain ?", choices: ["9", "10", "11", "12"], answer: "11" },
      { question: "Tripl√© en finale 2022 ?", choices: ["Messi", "Neymar", "Mbapp√©", "Ronaldo"], answer: "Mbapp√©" },
      { question: "Pays organisateur en 1930 ?", choices: ["Italie", "Uruguay", "Br√©sil", "Allemagne"], answer: "Uruguay" },
      { question: "Titres du Br√©sil ?", choices: ["3", "4", "5", "6"], answer: "5" },
      { question: "Vainqueur 2014 ?", choices: ["Argentine", "Allemagne", "Espagne", "Pays-Bas"], answer: "Allemagne" },
      { question: "Surnomm√© 'la Pulga' ?", choices: ["Neymar", "Ronaldo", "Messi", "Pel√©"], answer: "Messi" },
      { question: "Lieu Coupe du Monde 2022 ?", choices: ["Russie", "Qatar", "USA", "Espagne"], answer: "Qatar" },
      { question: "Nom du troph√©e ?", choices: ["Ligue des Champions", "Ballon d‚ÄôOr", "Jules Rimet", "UEFA"], answer: "Jules Rimet" },
      { question: "Dur√©e d‚Äôun match ?", choices: ["80", "90", "100", "60"], answer: "90" }
    ];

    let pseudo = "";
    let currentQuestion = 0;
    let score = 0;
    let combo = 0;
    let xp = 0;
    let timer;
    let timeLeft = 15;

    const pseudoScreen = document.getElementById('pseudoScreen');
    const quizBox = document.getElementById('quizBox');
    const result = document.getElementById('result');
    const questionEl = document.getElementById('question');
    const choicesEl = document.getElementById('choices');
    const xpFill = document.getElementById('xpFill');
    const xpDisplay = document.getElementById('xpDisplay');

    function startQuiz() {
      pseudo = document.getElementById('pseudoInput').value.trim();
      if (!pseudo) return alert("Entre ton pseudo !");
      pseudoScreen.classList.add('hidden');
      quizBox.classList.remove('hidden');
      loadQuestion();
    }

    function loadQuestion() {
      const q = questions[currentQuestion];
      questionEl.textContent = q.question;
      choicesEl.innerHTML = "";
      q.choices.forEach(c => {
        const li = document.createElement("li");
        li.innerHTML = `<label><input type='radio' name='choice' value="${c}"> ${c}</label>`;
        choicesEl.appendChild(li);
      });
      document.getElementById('question-counter').textContent = `Question ${currentQuestion + 1} / ${questions.length}`;
      updateProgressBar();
      timeLeft = 15;
      document.getElementById("time").textContent = timeLeft;
      clearInterval(timer);
      timer = setInterval(() => {
        timeLeft--;
        document.getElementById("time").textContent = timeLeft;
        if (timeLeft === 0) {
          clearInterval(timer);
          nextQuestion();
        }
      }, 1000);
    }

    document.getElementById("nextBtn").addEventListener("click", nextQuestion);

    function nextQuestion() {
      clearInterval(timer);
      const selected = document.querySelector("input[name='choice']:checked");
      const correct = selected && selected.value === questions[currentQuestion].answer;
      if (correct) {
        combo++;
        xp += (combo >= 4) ? 2 : 1;
        score++;
      } else {
        combo = 0;
      }
      xpDisplay.textContent = xp;
      xpFill.style.width = (xp / (questions.length * 2)) * 100 + "%";

      currentQuestion++;
      if (currentQuestion < questions.length) {
        quizBox.style.opacity = 0;
        setTimeout(() => {
          quizBox.style.opacity = 1;
          loadQuestion();
        }, 300);
      } else {
        showResult();
      }
    }

    function updateProgressBar() {
      const percent = (currentQuestion / questions.length) * 100;
      const bar = document.getElementById('progress-bar');
      bar.style.width = percent + "%";
      if (percent < 30) bar.style.background = "#e74c3c";
      else if (percent < 70) bar.style.background = "#f39c12";
      else bar.style.background = "#2ecc71";
    }

    function showResult() {
      quizBox.classList.add('hidden');
      result.classList.remove('hidden');
      document.getElementById('scoreText').textContent = `${pseudo}, tu as obtenu ${score}/10`;
      document.getElementById('levelMsg').textContent = score === 10 ? "‚úÖ Niveau suivant d√©bloqu√© !" : "üîí Fais un 10/10 pour d√©bloquer le prochain niveau.";
      saveToLeaderboard(pseudo, xp);
      showLeaderboard();
    }

    function saveToLeaderboard(pseudo, xp) {
      const data = JSON.parse(localStorage.getItem("leaderboard") || "[]");
      data.push({ pseudo, xp });
      data.sort((a, b) => b.xp - a.xp);
      localStorage.setItem("leaderboard", JSON.stringify(data.slice(0, 5)));
    }

    function showLeaderboard() {
      const data = JSON.parse(localStorage.getItem("leaderboard") || "[]");
      const html = `
        <h3>üèÜ Classement</h3>
        <ul>
          ${data.map(p => `<li>${p.pseudo} - ${p.xp} XP</li>`).join('')}
        </ul>
      `;
      document.getElementById("leaderboard").innerHTML = html;
    }
  </script>
</body>
</html>


